name: d-organizer
author: Andres Cabero <cabero96@protonmail.com>
version: "2.0"
about: a productivity tool for tidiness lovers
settings:
  - SubcommandRequiredElseHelp
  - StrictUtf8
subcommands:
  - run:
      about: Run with the default configuration
      args:
        - with_config: &with-config
            long: with-config
            help: Provide a different configuration file
            takes_value: true
            value_name: file

  - config:
      about: Edit configuration
      args:
        # all three of these sub-arguments conflict with each other
        - show_path:
            long: show-path
            help: Shows the default configuration path
            conflicts_with: new
        - new:
            long: new
            conflicts_with: show_defaults
            help: create a new config file in the current directory
        - show_defaults:
            long: show-defaults
            conflicts_with: show_path
  - suggest:
      about: Show improved workflow suggestions (must be enabled in config; experimental feature)
  - watch:
      about: Watch for changes and apply rules
      args:
        - with_config: *with-config
        - daemon:
            long: daemon
            display_order: 1
            takes_value: false
            help: Start watching as a background process
        - replace:
            requires: daemon
            long: replace
            takes_value: false
            help: Restarts the running daemon
        - allow_multiple_instances:
            long: allow-multiple-instances
            takes_value: false
            help: Makes it possible to watch for two different configurations
  - logs:
      about: Show logs
  - stop:
      about: Stop watching